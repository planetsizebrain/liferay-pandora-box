<?xml version="1.0" encoding="UTF-8"?>
<f:view xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://java.sun.com/jsf/core"
      	xmlns:h="http://java.sun.com/jsf/html">
	<h:head />
	<h:body>
		<h:messages globalOnly="true" />

		<div id='crash-terminal'></div>

		<script type="text/javascript">
		<!--
			// Embed CRaSH Web Connector - http://www.crashub.org/1.3/reference.html#_web_connector
			// Create web socket url
			var path = window.location.pathname;
			var protocol;
			if (window.location.protocol == 'http:') {
			  protocol = 'ws';
			} else {
			  protocol = 'wss';
			}
			var url = protocol + '://' + window.location.host + '/delegate/crash';

			// Handle auto console size
			var width = #{preferences.selectedConsoleSize.width};
			var height = #{preferences.selectedConsoleSize.height};
			if ((width + height) == 0) {
				width = $(window).width() - 120;
				height = $(window).height() - 190;
			}

			// Connect to the server
			var crash = new CRaSH($('#crash-terminal'), width, height);
			crash.connect(url);
		//-->
		</script>
	</h:body>
</f:view>